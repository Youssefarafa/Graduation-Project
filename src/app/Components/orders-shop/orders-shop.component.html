<div class="p-4 sm:p-6 md:p-8 max-w-6xl mx-auto font-Inter text-gray-900 dark:text-gray-100">
    <h2 class="text-3xl font-extrabold font-Poppins mb-8 text-green-700 dark:text-green-300 tracking-tight">
        Your Orders:
    </h2>

    <div *ngIf="loading()" class="text-center text-lg font-Roboto text-gray-500 dark:text-gray-300">
        Loading orders...
    </div>

    <div *ngIf="error()" class="text-red-600 dark:text-red-400 text-center text-sm font-semibold font-Roboto">
        {{ error() }}
    </div>

    <div *ngIf="!loading() && !error() && orders().length === 0"
        class="py-[150px]  my-5 mx-8 from-green-400 via-green-500 to-green-600 dark:from-green-600 dark:via-green-700 dark:to-green-800 bg-gradient-to-br shadow-lime-700/50 dark:shadow-lg dark:shadow-lime-800/50 rounded shadow-md flex flex-col justify-center items-center">
        <h2 class="text-3xl font-semibold dark:text-white font-Roboto text-center pb-10">üõí You haven‚Äôt placed any
            orders yet.</h2>
        <div class="flex justify-between mx-auto items-center align-baseline w-[100%] md:w-[50%] lg:w-[40%]">
            <h2 class="text-xl font-semibold dark:text-white font-Roboto text-center ms-2">Go Shopping ‚ú®üõí :</h2>
            <a routerLink="/User/Shop"
                class="font-Roboto hover:cursor-pointer text-gray-900 bg-gradient-to-r from-lime-400 via-lime-500 to-lime-600 hover:bg-gradient-to-br active:ring-4 active:outline-none active:ring-lime-300 dark:active:ring-lime-800 shadow-lg shadow-lime-500/50 dark:shadow-lg dark:shadow-lime-800/80 font-medium rounded-lg text-sm px-7 py-2.5 text-center me-2 mb-2">Shop</a>
        </div>
    </div>

    <div *ngFor="let order of orders(); let i = index"
        class="bg-white dark:bg-green-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 md:p-8 mb-8 transition-all duration-300 font-Quicksand">

        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between gap-4 mb-4">
            <div>
                <p class="text-sm md:text-base">
                    <span class="font-semibold text-gray-700 dark:text-gray-200">üìß Email:</span> {{ order.buyerEmail }}
                </p>
                <p class="text-sm md:text-base">
                    <span class="font-semibold text-gray-700 dark:text-gray-200">üìû Phone:</span> {{ order.phoneNumber
                    }}
                </p>
                <p class="text-sm md:text-base">
                    <span class="font-semibold text-gray-700 dark:text-gray-200">üïì Date:</span> {{ order.orderDate |
                    date:'medium' }}
                </p>
            </div>

            <div class="self-start md:self-center">
                <button (click)="toggle(i)"
                    class="inline-flex items-center gap-1 px-4 py-2 text-sm font-medium font-Roboto bg-green-100 dark:bg-green-700 text-green-800 dark:text-white rounded-md hover:bg-green-200 dark:hover:bg-green-600 transition">
                    <span *ngIf="!order.expanded">Show Details</span>
                    <span *ngIf="order.expanded">Hide Details</span>
                    <svg *ngIf="!order.expanded" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                    <svg *ngIf="order.expanded" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
                    </svg>

                </button>
            </div>
        </div>

        <!-- Expanded Info -->
        <div *ngIf="order.expanded">
            <!-- Address -->
            <div
                class="bg-green-50 dark:bg-green-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 mb-4 font-Inter text-sm md:text-base">
                <div class="mb-3 text-green-800 dark:text-green-200 font-semibold">üè† Shipping Address</div>
                <ul class="space-y-1 leading-relaxed">
                    <li><span class="font-semibold">Name:</span> {{ order.shippingAddress.fName }} {{
                        order.shippingAddress.lName }}</li>
                    <li><span class="font-semibold">Street:</span> {{ order.shippingAddress.street }}</li>
                    <li><span class="font-semibold">City:</span> {{ order.shippingAddress.city }}</li>
                    <li><span class="font-semibold">Country:</span> {{ order.shippingAddress.country }}</li>
                </ul>

                <p class="mt-3">
                    <span class="font-semibold">üöö Delivery Method:</span> {{ order.deliveryMethod }} -
                    <span class="text-green-700 dark:text-green-300">{{ order.deliveryMethodCost.toFixed(2) }}
                        EGP</span>
                </p>
            </div>

            <!-- Items Table -->
            <div class="overflow-x-auto rounded-lg">
                <table class="min-w-full text-sm border border-gray-300 dark:border-gray-700 font-Roboto">
                    <thead class="bg-green-100 dark:bg-green-900 text-left text-green-900 dark:text-green-200">
                        <tr>
                            <th class="px-4 py-2">Image</th>
                            <th class="px-4 py-2">Product</th>
                            <th class="px-4 py-2">Price</th>
                            <th class="px-4 py-2">Qty</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of order.items" class="border-t border-gray-200 dark:border-gray-700">
                            <td class="px-4 py-3">
                                <img [src]="item.pictureUrl" alt="Product Image"
                                    class="w-14 h-14 rounded-lg object-cover border border-gray-300 dark:border-gray-600 shadow-sm" />
                            </td>
                            <td class="px-4 py-3">{{ item.productName }}</td>
                            <td class="px-4 py-3 text-green-700 dark:text-green-300">{{ item.price.toFixed(2) }} EGP
                            </td>
                            <td class="px-4 py-3">{{ item.quantity }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Totals -->
            <div
                class="text-right mt-4 text-base font-medium font-Poppins space-y-1 text-green-700 dark:text-green-300">
                <p><span class="font-semibold">Subtotal:</span> {{ order.subTotal.toFixed(2) }} EGP</p>
                <p><span class="font-semibold">Total:</span> {{ order.total.toFixed(2) }} EGP</p>
            </div>
        </div>
    </div>
</div>